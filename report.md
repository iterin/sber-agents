# Отчёт по проекту

## Название и краткое описание
- **Проект:** sber-agents
- **Описание:** Банковский ИИ-ассистент, который помогает клиенту управлять счётом, консультирует по операциям и подключает внешние сервисы банка. MVP реализован в формате Telegram-бота с интеграцией LLM и минимальным RAG-потоком для ответов в реальном времени.

## Роль ИИ-ассистента
- **Выбранная роль:** Банковский консультант в Telegram.
- **Обоснование:** Целевая аудитория — пользователи мобильного банкинга, и чат-формат удобен для быстрых запросов. Роль консультанта позволяет сочетать диалоговый UX, автоматизацию типовых задач и возможность эскалации к живому оператору.

## Реализованные возможности
- [x] Команда `/ping` для проверки доступности бота.
- [x] Интеграция с OpenAI/OpenRouter и мок-режим без ключа.
- [x] Контекстная память диалога (до 20 сообщений) с обрезкой истории.
- [x] Команда `/reset` для сброса контекста.
- [x] Обработка ошибок и тайм-аутов с вежливыми ответами.
- [x] Конфигурация через ENV и запуск командой `make run`.

## Технологический стек
- Python 3.10+
- aiogram (Telegram Bot API)
- OpenAI client c поддержкой OpenRouter
- uv / pip для зависимостей, dotenv для конфигурации
- Makefile, pytest, ruff

## Инструменты AI-driven разработки
- **AI-coding IDE:** Cursor (режим pair-programming с GPT-4.1).
- **LLM модели:** `gpt-4o-mini` (через OpenRouter) для ответов бота; `gpt-4.1` семейство в Cursor для генерации кода и документации.

## Скриншот работы
![Демонстрация Telegram-бота](03-aidd/screenshots/bot-demo.png)

## Процесс разработки: основные вызовы и решения
- Настроена единая конфигурация через `.env` и Makefile, чтобы запуск в разных средах не требовал правок кода.
- Добавлена in-memory память на `deque` для хранения диалога и обрезки истории, что упростило поддержку контекста без БД.
- Реализованы фолбэки и повторные попытки LLM-запроса, чтобы бот не падал при сетевых ошибках и лимитах.
- Обрабатываются прокси и локальные переменные окружения, что упростило отладку в ограниченной сети.

## Чему научился в процессе AI-driven разработки
- Планировать работу итерациями и фиксировать прогресс в tasklist, чтобы ИИ-ассистенту было проще синхронизироваться с разработчиком.
- Формулировать промпты для генерации кода и документации так, чтобы получать воспроизводимые правки без ручного рефакторинга.
- Настраивать OpenAI клиент на работу через OpenRouter с автоматическим выбором модели и резервным мок-ответом.
- Интегрировать Cursor в цикл разработки: предварительная проверка изменений, запуск тестов и ведение документации в одном окне.

## Ссылка на работающего бота
- Пока недоступна (деплой в процессе подготовки).

