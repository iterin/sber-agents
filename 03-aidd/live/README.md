# Telegram LLM Bot

Простой и эффективный Telegram бот с интеграцией LLM через OpenRouter.

## Возможности

- ✅ Общение с LLM в естественном диалоге
- ✅ Сохранение контекста беседы
- ✅ Поддержка множества пользователей одновременно
- ✅ Асинхронная обработка запросов
- ✅ Простая настройка через переменные окружения

## Установка

### Требования

- Python 3.11+
- [uv](https://github.com/astral-sh/uv) - менеджер зависимостей

### Шаги установки

1. Клонируйте репозиторий:
   ```bash
   git clone <repository-url>
   cd telegram-llm-bot
   ```

2. Установите зависимости:
   ```bash
   make install
   ```

## Конфигурация

### 1. Получите токен Telegram бота

1. Найдите @BotFather в Telegram
2. Отправьте `/newbot` и следуйте инструкциям
3. Скопируйте полученный токен

### 2. Получите API ключ OpenRouter

1. Зарегистрируйтесь на [OpenRouter.ai](https://openrouter.ai/)
2. Перейдите в раздел API Keys
3. Создайте новый ключ

### 3. Настройте переменные окружения

1. Скопируйте пример конфигурации:
   ```bash
   cp .env.example .env
   ```

2. Отредактируйте `.env` файл:
   ```bash
   TELEGRAM_TOKEN=ваш_токен_от_BotFather
   OPENAI_API_KEY=ваш_ключ_от_OpenRouter
   OPENAI_BASE_URL=https://openrouter.ai/api/v1
   MODEL=openai/gpt-oss-20b:free
   SYSTEM_PROMPT=Ты дружелюбный ассистент.
   ```

**Описание переменных:**

- `TELEGRAM_TOKEN` - токен бота от @BotFather (обязательно)
- `OPENAI_API_KEY` - API ключ от OpenRouter (обязательно)
- `OPENAI_BASE_URL` - URL OpenRouter API (по умолчанию: https://openrouter.ai/api/v1)
- `MODEL` - модель LLM для использования (рекомендуется: openai/gpt-oss-20b:free)
- `SYSTEM_PROMPT` - системная инструкция для LLM (настройка поведения бота)

## Запуск

```bash
make run
```

Бот запустится в режиме polling и будет работать до остановки (Ctrl+C).

## Использование

### Команды бота

- `/start` - начать новый диалог (сбрасывает историю)

### Примеры диалогов

**Пример 1: Простой вопрос-ответ**
```
Пользователь: Что такое Python?
Бот: Python — это высокоуровневый язык программирования...
```

**Пример 2: Диалог с контекстом**
```
Пользователь: Меня зовут Иван
Бот: Приятно познакомиться, Иван!

Пользователь: Как меня зовут?
Бот: Вас зовут Иван.
```

**Пример 3: Помощь с кодом**
```
Пользователь: Напиши функцию на Python для вычисления факториала
Бот: [предоставит код с пояснениями]
```

## Ограничения

- Бот работает только с текстовыми сообщениями
- Максимальная длина сообщения: 4000 символов
- История диалога хранится в памяти (при перезапуске бота теряется)
- Бот не обрабатывает фото, голосовые, файлы и стикеры

## Разработка

### Структура проекта

```
├── src/
│   ├── bot.py          # Точка входа, инициализация
│   ├── config.py       # Загрузка конфигурации
│   ├── handlers.py     # Обработчики сообщений
│   └── llm.py          # Интеграция с LLM
├── .env                # Конфигурация (не коммитится)
├── .env.example        # Пример конфигурации
├── Makefile            # Команды для работы
├── pyproject.toml      # Зависимости проекта
└── README.md           # Документация
```

### Команды Makefile

- `make install` - установить зависимости
- `make run` - запустить бота

## Лицензия

MIT

